#! node
const fs = require('fs')
const path = require('path')

const dataFolder = './data/'
const outputFile = 'dataFiles.ts'

const identifier = f => f.replace(' ', '__').replace('.', '___')
const importStatement = f => `import ${identifier(f)} from './${f}.yaml'`
const exportField = f => `'${f}': ${identifier(f)}`

const files = fs
  .readdirSync(dataFolder)
  .filter(f => f !== outputFile)
  .map(f => path.parse(f).name)

console.log(`Found data files: ${files.map(f => '\n  - ' + f).join('')}`)

const output = `// Generated by index_data_files script
${files.map(importStatement).join('\n')}
export default { ${files.map(exportField).join(', ')} }
`

fs.writeFileSync(path.join(dataFolder, outputFile), output)
